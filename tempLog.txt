npm run dev

> soragemi-x@1.0.0 dev
> concurrently -k -n "FE,BE" "npm run dev --workspace frontend" "npm run start --workspace backend"

[BE] 
[BE] > soragemi-x-backend@1.0.0 start
[BE] > node server.js
[BE] 
[FE] 
[FE] > soragemi-x-frontend@1.0.0 dev
[FE] > vite
[FE] 
[FE] 
[FE]   VITE v4.5.14  ready in 489 ms
[FE] 
[FE]   ➜  Local:   http://localhost:5173/
[FE]   ➜  Network: http://192.168.1.3:5173/
[BE] 🔄 Verificando conexión a la base de datos...
[BE] ✅ Conexión a MySQL establecida correctamente
[BE] 📊 Base de datos: zoragenix_db
[BE] 🏠 Host: localhost:3306
[BE] 🚀 ===================================
[BE] 🌟 SoraGemiX Backend Server Started
[BE] 🚀 ===================================
[BE] 📡 Servidor ejecutándose en puerto: 5001
[BE] 🌐 URL: http://localhost:5001
[BE] 🏥 Health Check: http://localhost:5001/health
[BE] 📚 API Base: http://localhost:5001/api
[BE] 🔧 Entorno: development
[BE] 🚀 ===================================
[BE] 📁 Archivo procesado: istockphoto-1200677760-612x612.jpg (24KB)
[BE] 📁 Archivo procesado: istockphoto-1277996375-612x612.jpg (30KB)
[BE] 📝 Datos recibidos: {
[BE]   toolId: 11,
[BE]   selectedOptions: {
[BE]     'Combinar Imágenes_tipo1': 'persona',
[BE]     'Combinar Imágenes_tipo2': 'persona',
[BE]     'Combinar Imágenes_interacción': 'posar junto',
[BE]     'Tiempo y Clima_clima': 'nevado',
[BE]     'Tiempo y Clima_tiempo': 'mañana',
[BE]     'Tiempo y Clima_temperatura': '-14'
[BE]   },
[BE]   customPrompt: 'Combinar Imágenes: combinar imagen 1 con sujeto  y imagen 2 con sujeto  para que su interacción sea de posar junto de forma coherente. Tiempo y Clima: establecer clima clima nevado y tiempo tiempo mañana en la imagen',
[BE]   generationMode: 'multiple_images'
[BE] }
[BE] 🎯 Prompt final construido: Combinar Imágenes: combinar imagen 1 con sujeto  y imagen 2 con sujeto  para que su interacción sea de posar junto de forma coherente. Tiempo y Clima: establecer clima clima nevado y tiempo tiempo mañana en la imagen
[BE] 🎨 Generando imagen para usuario 1
[BE] 📝 Prompt: Combinar Imágenes: combinar imagen 1 con sujeto  y imagen 2 con sujeto  para que su interacción sea de posar junto de forma coherente. Tiempo y Clima: establecer clima clima nevado y tiempo tiempo mañ...
[BE] ✅ Nano-Banana service inicializado correctamente
[BE] 🖼️ Editando múltiples imágenes: 2 imágenes
[BE] ✅ Respuesta procesada: { hasText: true, imageCount: 1, finishReason: 'STOP' }
[BE] 💾 Imagen guardada: /Volumes/SSD_ALEJANDRO_MAC/MAIN/DOCUMENTS/ALEJANDRO_DEV/REPOSITORIES/ZoraGeniX/backend/uploads/generated/generated_1_1758694428406.png
[BE] ✅ Imagen generada exitosamente para usuario 1
[BE] 💳 Créditos restantes: 997
[BE] 🗑️ Archivo temporal eliminado: images-1758694416826-498004660.jpg
[BE] 🗑️ Archivo temporal eliminado: images-1758694416829-244557079.jpg
[BE] ❌ Error descargando imagen: TypeError [ERR_INVALID_ARG_TYPE]: The "path" argument must be of type string. Received undefined
[BE]     at new NodeError (node:internal/errors:405:5)
[BE]     at validateString (node:internal/validators:162:11)
[BE]     at Object.join (node:path:1171:7)
[BE]     at downloadImage (/Volumes/SSD_ALEJANDRO_MAC/MAIN/DOCUMENTS/ALEJANDRO_DEV/REPOSITORIES/ZoraGeniX/backend/controllers/imageController.js:512:27)
[BE]     at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
[BE]   code: 'ERR_INVALID_ARG_TYPE'
[BE] }
[BE] Error capturado: {
[BE]   message: 'The "path" argument must be of type string. Received undefined',
[BE]   stack: 'TypeError [ERR_INVALID_ARG_TYPE]: The "path" argument must be of type string. Received undefined\n' +
[BE]     '    at new NodeError (node:internal/errors:405:5)\n' +
[BE]     '    at validateString (node:internal/validators:162:11)\n' +
[BE]     '    at Object.join (node:path:1171:7)\n' +
[BE]     '    at downloadImage (/Volumes/SSD_ALEJANDRO_MAC/MAIN/DOCUMENTS/ALEJANDRO_DEV/REPOSITORIES/ZoraGeniX/backend/controllers/imageController.js:512:27)\n' +
[BE]     '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)',
[BE]   url: '/api/images/4/download',
[BE]   method: 'GET',
[BE]   timestamp: '2025-09-24T06:14:06.875Z'
[BE] }
[BE] Error de MySQL no manejado: ERR_INVALID_ARG_TYPE
